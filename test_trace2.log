
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 18.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Unlimited-user 16-core network, expiring  2 Jul 2026
Serial number: 501909320077
  Licensed to: Michael Droste
               Stanford University GSB

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.


Running /Users/Mike/Documents/Stata/profile.do ...

. do /tmp/test_trace2.do 

. clear all

. program drop _all

. adopath ++ "./build"
  [1]              "./build"
  [2]  (BASE)      "/Applications/Stata/ado/base/"
  [3]  (SITE)      "/Applications/Stata/ado/site/"
  [4]              "."
  [5]  (PERSONAL)  "/Users/Mike/Documents/Stata/ado/personal/"
  [6]  (PLUS)      "/Users/Mike/Library/Application Support/Stata/ado/plus/"
  [7]  (OLDPLACE)  "~/ado/"

. sysuse auto, clear
(1978 automobile data)

. 
. set trace on

. set tracedepth 1

. cexport delimited using "/tmp/test.csv", replace
  ----------------------------------------------------------- begin cexport ---
  - version 14.0
  - gettoken subcmd 0 : 0, parse(" ,")
  - if "`subcmd'" != "delimited" {
  = if "delimited" != "delimited" {
    di as error "cexport: unknown subcommand `subcmd'"
    di as error "Syntax: cexport delimited [varlist] using filename [, options]
> "
    exit 198
    }
  - syntax [varlist] using/ [if] [in], [Delimiter(string) NOVARNames QUOTE NOQU
> OTEif REPLACE DATAfmt Verbose TIMEit]
  - marksample touse, novarlist
  - if "`replace'" == "" {
  = if "replace" == "" {
    capture confirm file `"`using'"'
    if !_rc {
    di as error "file `using' already exists"
    di as error "use the replace option to overwrite"
    exit 602
    }
    }
  - if `"`delimiter'"' == "" {
  = if `""' == "" {
  - local delimiter ","
  - }
  - if `"`delimiter'"' == "tab" | `"`delimiter'"' == "\t" {
  = if `","' == "tab" | `","' == "\t" {
    local delimiter "       "
    local delim_display "tab"
    }
  - else {
  - local delim_display `"`delimiter'"'
  = local delim_display `","'
  - }
  - if length(`"`delimiter'"') != 1 {
  = if length(`","') != 1 {
    di as error "cexport: delimiter must be a single character"
    exit 198
    }
  - if "`varlist'" == "" {
  = if "make price mpg rep78 headroom trunk weight length turn displacement gea
> r_ratio foreign" == "" {
    qui ds
    local varlist `r(varlist)'
    }
  - local nvars : word count `varlist'
  = local nvars : word count make price mpg rep78 headroom trunk weight length 
> turn displacement gear_ratio foreign
  - qui count `if' `in'
  = qui count  
  - local nobs = r(N)
  - if `nvars' == 0 {
  = if 12 == 0 {
    di as error "cexport: no variables to export"
    exit 198
    }
  - if `nobs' == 0 {
  = if 74 == 0 {
    di as error "cexport: no observations to export"
    exit 2000
    }
  - capture program list ctools_plugin
  - if _rc != 0 {
  - local __os = c(os)
  - local __machine = c(machine_type)
  - local __is_mac = 0
  - if "`__os'" == "MacOSX" {
  = if "Unix" == "MacOSX" {
    local __is_mac = 1
    }
  - else if strpos(lower("`__machine'"), "mac") > 0 {
  = else if strpos(lower("Mac (Apple Silicon)"), "mac") > 0 {
  - local __is_mac = 1
  - }
  - local __plugin = ""
  - if "`__os'" == "Windows" {
  = if "Unix" == "Windows" {
    local __plugin "ctools_windows.plugin"
    }
  - else if `__is_mac' {
  = else if 1 {
  - local __is_arm = 0
  - if strpos(lower("`__machine'"), "apple") > 0 | strpos(lower("`__machine'"),
>  "arm") > 0 | strpos(lower("`__machine'"), "silicon") > 0 {
  = if strpos(lower("Mac (Apple Silicon)"), "apple") > 0 | strpos(lower("Mac (A
> pple Silicon)"), "arm") > 0 | strpos(lower("Mac (Apple Silicon)"), "silicon")
>  > 0 {
  - local __is_arm = 1
  - }
  - if `__is_arm' == 0 {
  = if 1 == 0 {
    tempfile __archfile
    quietly shell uname -m > "`__archfile'" 2>&1
    tempname __fh
    file open `__fh' using "`__archfile'", read text
    file read `__fh' __archline
    file close `__fh'
    capture erase "`__archfile'"
    if strpos("`__archline'", "arm64") > 0 {
    local __is_arm = 1
    }
    }
  - if `__is_arm' {
  = if 1 {
  - local __plugin "ctools_mac_arm.plugin"
  - }
  - else {
    local __plugin "ctools_mac_x86.plugin"
    }
  - }
  - else if "`__os'" == "Unix" {
  = else if "Unix" == "Unix" {
    local __plugin "ctools_linux.plugin"
    }
  - else {
    local __plugin "ctools.plugin"
    }
  - capture program ctools_plugin, plugin using("`__plugin'")
  = capture program ctools_plugin, plugin using("ctools_mac_arm.plugin")
  - if _rc != 0 & _rc != 110 & "`__plugin'" != "ctools.plugin" {
  = if _rc != 0 & _rc != 110 & "ctools_mac_arm.plugin" != "ctools.plugin" {
    capture program ctools_plugin, plugin using("ctools.plugin")
    }
  - if _rc != 0 & _rc != 110 {
    di as error "cexport: Could not load ctools plugin"
    exit 601
    }
  - }
  - if "`verbose'" != "" {
  = if "" != "" {
    di as text ""
    di as text "{hline 60}"
    di as text "cexport delimited: High-Performance CSV Export"
    di as text "{hline 60}"
    di as text "File:       " as result `"`using'"'
    di as text "Variables:  " as result `nvars'
    di as text "Obs:        " as result `nobs'
    di as text "Delimiter:  " as result "`delim_display'"
    di as text "Header:     " as result cond("`novarnames'" == "", "yes", "no")
    di as text "Quoting:    " as result cond("`quote'" != "", "all strings", co
> nd("`noquoteif'" != "", "none", "as needed"))
    di as text "{hline 60}"
    di ""
    }
  - local opt_noheader = cond("`novarnames'" != "", "noheader", "")
  = local opt_noheader = cond("" != "", "noheader", "")
  - local opt_quote = cond("`quote'" != "", "quote", "")
  = local opt_quote = cond("" != "", "quote", "")
  - local opt_noquoteif = cond("`noquoteif'" != "", "noquoteif", "")
  = local opt_noquoteif = cond("" != "", "noquoteif", "")
  - local opt_verbose = cond("`verbose'" != "", "verbose", "")
  = local opt_verbose = cond("" != "", "verbose", "")
  - global _cexport_varnames `"`varlist'"'
  = global _cexport_varnames `"make price mpg rep78 headroom trunk weight lengt
> h turn displacement gear_ratio foreign"'
invalid syntax
  ------------------------------------------------------------- end cexport ---
r(198);

end of do-file
r(198);
