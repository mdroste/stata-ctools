
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 18.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Unlimited-user 16-core network, expiring  2 Jul 2026
Serial number: 501909320077
  Licensed to: Michael Droste
               Stanford University GSB

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.


Running /Users/Mike/Documents/Stata/profile.do ...

. do validation/validate_csort.do 

. /****************************************************************************
> ***
>  * validate_csort.do
>  *
>  * Comprehensive validation tests for csort vs native Stata sort
>  * Tests all sort algorithms and data type scenarios
>  *
>  * Algorithms tested:
>  *   - lsd (default): LSD radix sort
>  *   - msd: MSD radix sort
>  *   - timsort: Timsort
>  *   - sample: Sample sort
>  *   - counting: Counting sort
>  *   - merge: Parallel merge sort
>  *   - ips4o: In-place parallel super scalar samplesort
>  ****************************************************************************
> **/
. 
. * Load setup (works from project root or validation dir)
. capture do "validation/validate_setup.do"

. if _rc != 0 {
.     do "validate_setup.do"
. }

. 
. quietly {

======================================================================
              CSORT VALIDATION TEST SUITE
======================================================================

----------------------------------------------------------------------
Plugin Check
----------------------------------------------------------------------
[PASS] csort plugin loads and runs

----------------------------------------------------------------------
Default Algorithm (LSD Radix Sort)
----------------------------------------------------------------------
[PASS] numeric: price
[PASS] numeric: mpg
[PASS] numeric: weight
[PASS] string: make
[PASS] binary: foreign
[PASS] with missings: rep78
[PASS] two keys: foreign price
[PASS] three keys: foreign rep78 price
[PASS] mixed keys: make price

----------------------------------------------------------------------
MSD Radix Sort Algorithm
----------------------------------------------------------------------
[PASS] numeric: price [alg=msd]
[PASS] string: make [alg=msd]
[PASS] string: state [alg=msd]
[PASS] mixed: foreign make [alg=msd]
[PASS] with missings [alg=msd]

----------------------------------------------------------------------
Timsort Algorithm
----------------------------------------------------------------------
[PASS] numeric: price [alg=timsort]
[PASS] multi-numeric [alg=timsort]
[PASS] string: make [alg=timsort]
[PASS] with missings [alg=timsort]
[PASS] already sorted [alg=timsort]
[PASS] reverse sorted [alg=timsort]

----------------------------------------------------------------------
Sample Sort Algorithm
----------------------------------------------------------------------
[PASS] numeric: price [alg=sample]
[PASS] string: make [alg=sample]
[PASS] string: state [alg=sample]
[PASS] mixed: foreign make [alg=sample]
[PASS] with missings [alg=sample]

----------------------------------------------------------------------
Counting Sort Algorithm
----------------------------------------------------------------------
[PASS] binary (0/1) [alg=counting]
[PASS] small int range [alg=counting]
[PASS] year data [alg=counting]
[PASS] multi-int [alg=counting]

----------------------------------------------------------------------
Parallel Merge Sort Algorithm
----------------------------------------------------------------------
[PASS] numeric: price [alg=merge]
[PASS] string: make [alg=merge]
[PASS] string: state [alg=merge]
[PASS] mixed: foreign make [alg=merge]
[PASS] with missings [alg=merge]

----------------------------------------------------------------------
IPS4o Algorithm
----------------------------------------------------------------------
[PASS] numeric: price [alg=ips4o]
[PASS] string: make [alg=ips4o]
[PASS] string: state [alg=ips4o]
[PASS] mixed: foreign make [alg=ips4o]
[PASS] with missings [alg=ips4o]
[PASS] already sorted [alg=ips4o]
[PASS] reverse sorted [alg=ips4o]

----------------------------------------------------------------------
Edge Cases
----------------------------------------------------------------------
[PASS] single obs [alg=lsd]
[PASS] single obs [alg=msd]
[PASS] single obs [alg=timsort]
[PASS] single obs [alg=sample]
[PASS] single obs [alg=merge]
[PASS] single obs [alg=ips4o]
[PASS] two obs [alg=lsd]
[PASS] two obs [alg=msd]
[PASS] two obs [alg=timsort]
[PASS] two obs [alg=sample]
[PASS] two obs [alg=merge]
[PASS] two obs [alg=ips4o]
[PASS] all same values [alg=lsd]
[PASS] all same values [alg=msd]
[PASS] all same values [alg=timsort]
[PASS] all same values [alg=sample]
[PASS] all same values [alg=merge]
[PASS] all same values [alg=ips4o]

----------------------------------------------------------------------
Numeric Edge Cases
----------------------------------------------------------------------
[PASS] negative numbers
[PASS] extreme integers
[PASS] small floats (1e-10)
[PASS] large floats (1e10)
[PASS] mixed pos/neg

----------------------------------------------------------------------
String Edge Cases
----------------------------------------------------------------------
[PASS] empty strings
[PASS] variable length strings
[PASS] mixed case strings

----------------------------------------------------------------------
Large Dataset Tests
----------------------------------------------------------------------
[PASS] 10K random floats
[PASS] 10K random ints
[PASS] 10K random strings
[PASS] 50K random normal
[PASS] 50K group + id

----------------------------------------------------------------------
Census Dataset
----------------------------------------------------------------------
[PASS] state name
[PASS] region code
[PASS] population
[PASS] region state
[PASS] region pop

----------------------------------------------------------------------
Option Tests
----------------------------------------------------------------------
[PASS] verbose option accepted
[PASS] timeit option accepted

----------------------------------------------------------------------
SUMMARY: csort
----------------------------------------------------------------------
Tests passed: 80 / 80
Tests failed: 0
----------------------------------------------------------------------
ALL TESTS PASSED
----------------------------------------------------------------------

. 
end of do-file
