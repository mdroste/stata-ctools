
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 18.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Unlimited-user 16-core network, expiring  2 Jul 2026
Serial number: 501909320077
  Licensed to: Michael Droste
               Stanford University GSB

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.


Running /Users/Mike/Documents/Stata/profile.do ...

. do "validation/validate_cimport.do" 

. /****************************************************************************
> ***
>  * validate_cimport.do
>  *
>  * Comprehensive validation tests for cimport delimited vs import delimited
>  * Tests all import options: delimiters, varnames, case, bindquotes, stripquo
> tes
>  *
>  * VERIFICATION: All tests use cf _all to verify byte-for-byte identical data
>  ****************************************************************************
> **/
. 
. * Load setup (works from project root or validation dir)
. capture do "validation/validate_setup.do"

. if _rc != 0 {
.     do "validate_setup.do"
. }

. 
. quietly {

----------------------------------------------------------------------
Creating Test Data Files
----------------------------------------------------------------------
[PASS] Test files created

----------------------------------------------------------------------
Plugin Check
----------------------------------------------------------------------
[PASS] cimport plugin loads and runs

----------------------------------------------------------------------
Basic Comma-Delimited Import
----------------------------------------------------------------------
[PASS] basic CSV data identical (cf _all)

----------------------------------------------------------------------
Tab-Delimited Import
----------------------------------------------------------------------
[PASS] tab-delimited data identical (cf _all)

----------------------------------------------------------------------
Semicolon-Delimited Import
----------------------------------------------------------------------
[PASS] semicolon-delimited data identical (cf _all)

----------------------------------------------------------------------
varnames() Option
----------------------------------------------------------------------
[PASS] varnames(1) data identical (cf _all)
[PASS] varnames(nonames) data identical (cf _all)

----------------------------------------------------------------------
case() Option
----------------------------------------------------------------------
[PASS] case(preserve) data identical (cf _all)
[PASS] case(lower) data identical (cf _all)
[PASS] case(upper) data identical (cf _all)

----------------------------------------------------------------------
Missing Values
----------------------------------------------------------------------
[PASS] missing values data identical (cf _all)

----------------------------------------------------------------------
Quoted Fields
----------------------------------------------------------------------
[PASS] quoted fields data identical (cf _all)

----------------------------------------------------------------------
bindquotes() Option
----------------------------------------------------------------------
[PASS] bindquotes(strict) data identical (cf _all)
[PASS] bindquotes(loose) data identical (cf _all)

----------------------------------------------------------------------
stripquotes Option
----------------------------------------------------------------------
[PASS] stripquotes option accepted

----------------------------------------------------------------------
Large File Import
----------------------------------------------------------------------
[PASS] large file (5000 rows) data identical (cf _all)

----------------------------------------------------------------------
verbose Option
----------------------------------------------------------------------
[PASS] verbose option accepted

----------------------------------------------------------------------
clear Option
----------------------------------------------------------------------
[PASS] no clear: fails with data in memory
[PASS] clear option works

----------------------------------------------------------------------
Round-Trip Tests
----------------------------------------------------------------------
[PASS] auto dataset round-trip identical (cf _all)
[PASS] census dataset round-trip identical (cf _all)

----------------------------------------------------------------------
Additional Data Types
----------------------------------------------------------------------
[PASS] numeric types data identical (cf _all)
[PASS] string types data identical (cf _all)

----------------------------------------------------------------------
Malformed/Edge Case CSV Files
----------------------------------------------------------------------

>>> [FAIL] multiline quoted fields
>>>        dimensions differ: Stata N=7 K=3, cimport N=4 K=3

[PASS] multiline with bindquotes(strict) identical (cf _all)

>>> [FAIL] multiline complex
>>>        dimensions differ: Stata N=5 K=3, cimport N=3 K=3


>>> [FAIL] multiline empty lines
>>>        dimensions differ: Stata N=3 K=3, cimport N=2 K=3

[PASS] quote edge cases: same behavior (both rc=0)

>>> [FAIL] newline only field
>>>        dimensions differ: Stata N=3 K=3, cimport N=2 K=3


>>> [FAIL] long multiline
>>>        dimensions differ: Stata N=7 K=3, cimport N=2 K=3


>>> [FAIL] multiline positions
>>>        dimensions differ: Stata N=5 K=3, cimport N=3 K=3


>>> [FAIL] multiline whitespace
>>>        dimensions differ: Stata N=4 K=3, cimport N=2 K=3


----------------------------------------------------------------------
FAILED TESTS DETAIL:
----------------------------------------------------------------------
  1. multiline quoted fields: dimensions differ: Stata N=7 K=3, cimport N=4 K=3
  2. multiline complex: dimensions differ: Stata N=5 K=3, cimport N=3 K=3
  3. multiline empty lines: dimensions differ: Stata N=3 K=3, cimport N=2 K=3
  4. newline only field: dimensions differ: Stata N=3 K=3, cimport N=2 K=3
  5. long multiline: dimensions differ: Stata N=7 K=3, cimport N=2 K=3
  6. multiline positions: dimensions differ: Stata N=5 K=3, cimport N=3 K=3
  7. multiline whitespace: dimensions differ: Stata N=4 K=3, cimport N=2 K=3
----------------------------------------------------------------------


----------------------------------------------------------------------
SUMMARY: cimport
----------------------------------------------------------------------
Tests passed: 25 / 32
Tests failed: 7
----------------------------------------------------------------------
VALIDATION FAILED - See failed tests above
----------------------------------------------------------------------
--Break--
--Break--
--Break--
r(1);

end of do-file
--Break--
r(1);
